function _0x555d(_0x1ef5fa,_0x50912c){_0x1ef5fa=_0x1ef5fa-0x1e6;const _0x54ef43=_0x54ef();let _0x555d36=_0x54ef43[_0x1ef5fa];return _0x555d36;}const _0x2d717e=_0x555d;(function(_0x1bdc46,_0x40d4fd){const _0x2564e4=_0x555d,_0x394b4f=_0x1bdc46();while(!![]){try{const _0xcb7770=parseInt(_0x2564e4(0x246))/0x1*(-parseInt(_0x2564e4(0x1f4))/0x2)+parseInt(_0x2564e4(0x223))/0x3*(-parseInt(_0x2564e4(0x209))/0x4)+-parseInt(_0x2564e4(0x20c))/0x5*(-parseInt(_0x2564e4(0x239))/0x6)+parseInt(_0x2564e4(0x20a))/0x7*(-parseInt(_0x2564e4(0x22a))/0x8)+parseInt(_0x2564e4(0x1ee))/0x9+parseInt(_0x2564e4(0x233))/0xa+parseInt(_0x2564e4(0x206))/0xb*(parseInt(_0x2564e4(0x203))/0xc);if(_0xcb7770===_0x40d4fd)break;else _0x394b4f['push'](_0x394b4f['shift']());}catch(_0x505ba3){_0x394b4f['push'](_0x394b4f['shift']());}}}(_0x54ef,0x1a808));import{initializeApp}from'https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js';import{getAuth,createUserWithEmailAndPassword,signInWithEmailAndPassword,signOut,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/11.0.2/firebase-auth.js';import{getFirestore,doc,setDoc,getDoc,updateDoc,writeBatch,collection,serverTimestamp}from'https://www.gstatic.com/firebasejs/11.0.2/firebase-firestore.js';const firebaseConfig={'apiKey':_0x2d717e(0x20b),'authDomain':_0x2d717e(0x1e8),'projectId':_0x2d717e(0x211),'storageBucket':_0x2d717e(0x1f9),'messagingSenderId':_0x2d717e(0x240),'appId':'1:979751268015:web:17a5d9a00ae8b0da57ae5a'},app=initializeApp(firebaseConfig),authInstance=getAuth(app),db=getFirestore(app);console[_0x2d717e(0x24f)]('üî•\x20Firebase\x20initialized');export const auth={async 'register'(_0x12eb3e,_0x451e83){const _0x35c2bb=_0x2d717e;try{const _0x4628ac=await createUserWithEmailAndPassword(authInstance,_0x12eb3e,_0x451e83);return console[_0x35c2bb(0x24f)]('‚úÖ\x20User\x20registered:',_0x4628ac['user']['uid']),_0x4628ac;}catch(_0x379362){console[_0x35c2bb(0x1e6)](_0x35c2bb(0x230),_0x379362);throw _0x379362;}},async 'login'(_0x7acebf,_0x28ebc8){const _0x5f1600=_0x2d717e;try{const _0x50ddc4=await signInWithEmailAndPassword(authInstance,_0x7acebf,_0x28ebc8);return console[_0x5f1600(0x24f)](_0x5f1600(0x243),_0x50ddc4[_0x5f1600(0x231)][_0x5f1600(0x1fe)]),_0x50ddc4;}catch(_0x325ff){console[_0x5f1600(0x1e6)](_0x5f1600(0x1e9),_0x325ff);throw _0x325ff;}},async 'logout'(){const _0x4a64f1=_0x2d717e;try{await signOut(authInstance),console[_0x4a64f1(0x24f)](_0x4a64f1(0x227));}catch(_0x673783){console[_0x4a64f1(0x1e6)](_0x4a64f1(0x22e),_0x673783);throw _0x673783;}},'getCurrentUser'(){const _0x1b4605=_0x2d717e;return authInstance[_0x1b4605(0x22c)];},'onAuthStateChanged'(_0x999d9b){return onAuthStateChanged(authInstance,_0x999d9b);}};export async function saveUserData(_0x4781ad,_0xba164a){const _0x19c38d=_0x2d717e;try{const _0x2c4134=doc(db,_0x19c38d(0x21f),_0x4781ad);await setDoc(_0x2c4134,{..._0xba164a,'updatedAt':serverTimestamp()},{'merge':!![]}),console[_0x19c38d(0x24f)](_0x19c38d(0x23d));}catch(_0x543239){console['error'](_0x19c38d(0x21b),_0x543239);throw _0x543239;}}export async function getUserData(_0x166f5a){const _0x2085cf=_0x2d717e;try{const _0x3d114d=doc(db,_0x2085cf(0x21f),_0x166f5a),_0x307fc0=await getDoc(_0x3d114d);return _0x307fc0[_0x2085cf(0x220)]()?(console[_0x2085cf(0x24f)](_0x2085cf(0x1f3)),_0x307fc0[_0x2085cf(0x1fc)]()):(console[_0x2085cf(0x24f)](_0x2085cf(0x214)),null);}catch(_0x49e595){console['error'](_0x2085cf(0x23b),_0x49e595);throw _0x49e595;}}export async function updateUserStats(_0x587358,_0xd6ed81){const _0x22ac43=_0x2d717e,_0x4bfa10=authInstance[_0x22ac43(0x22c)];if(!_0x4bfa10){console[_0x22ac43(0x1e6)](_0x22ac43(0x248));return;}if(_0x4bfa10[_0x22ac43(0x1fe)]!==_0x587358){console[_0x22ac43(0x1e6)]('‚ùå\x20User\x20ID\x20mismatch\x20for\x20stats\x20update');return;}try{const _0x26ef8c=doc(db,_0x22ac43(0x21f),_0x587358);await updateDoc(_0x26ef8c,{'stats':_0xd6ed81,'updatedAt':serverTimestamp()}),console[_0x22ac43(0x24f)]('‚úÖ\x20User\x20stats\x20updated\x20in\x20Firestore');}catch(_0x3c2381){console[_0x22ac43(0x1e6)](_0x22ac43(0x1e7),_0x3c2381),console[_0x22ac43(0x1e6)]('Error\x20code:',_0x3c2381[_0x22ac43(0x229)]);}}export async function batchUploadScans(_0x393a5d,_0x3e02b3){const _0x48c9e3=_0x2d717e,_0x1d4777=authInstance[_0x48c9e3(0x22c)];if(!_0x1d4777)return console['error'](_0x48c9e3(0x20e)),{'success':![],'error':'User\x20not\x20authenticated','count':0x0};if(_0x1d4777[_0x48c9e3(0x1fe)]!==_0x393a5d)return console[_0x48c9e3(0x1e6)](_0x48c9e3(0x1f6)),{'success':![],'error':_0x48c9e3(0x24c),'count':0x0};if(!_0x3e02b3||_0x3e02b3[_0x48c9e3(0x21d)]===0x0)return console[_0x48c9e3(0x24f)](_0x48c9e3(0x208)),{'success':!![],'count':0x0};try{console[_0x48c9e3(0x24f)](_0x48c9e3(0x232)+_0x3e02b3[_0x48c9e3(0x21d)]+_0x48c9e3(0x1ef)+_0x393a5d);const _0x415b84=0x1f4,_0x4b5925=[];for(let _0x516c22=0x0;_0x516c22<_0x3e02b3[_0x48c9e3(0x21d)];_0x516c22+=_0x415b84){const _0x370977=_0x3e02b3['slice'](_0x516c22,_0x516c22+_0x415b84);_0x4b5925['push'](_0x370977);}let _0x1d1657=0x0;for(let _0x1ac5e5=0x0;_0x1ac5e5<_0x4b5925[_0x48c9e3(0x21d)];_0x1ac5e5++){const _0x2c91f1=_0x4b5925[_0x1ac5e5],_0x2f5c5c=writeBatch(db);console[_0x48c9e3(0x24f)](_0x48c9e3(0x244)+(_0x1ac5e5+0x1)+'/'+_0x4b5925['length']+'\x20('+_0x2c91f1[_0x48c9e3(0x21d)]+_0x48c9e3(0x212)),_0x2c91f1[_0x48c9e3(0x23c)](_0x408496=>{const _0x1a25dd=_0x48c9e3,_0x544224=doc(collection(db,_0x1a25dd(0x21f),_0x393a5d,_0x1a25dd(0x215))),_0x4a9081={'type':_0x408496[_0x1a25dd(0x24d)]||_0x1a25dd(0x247),'name':_0x408496[_0x1a25dd(0x228)]||_0x1a25dd(0x210),'emoji':_0x408496[_0x1a25dd(0x234)]||'‚ùì','points':_0x408496[_0x1a25dd(0x1ec)]||0x0,'weight':_0x408496[_0x1a25dd(0x23e)]||0x0,'confidence':_0x408496['confidence']||0x0,'timestamp':_0x408496[_0x1a25dd(0x1ed)]||new Date()['toISOString'](),'uploadedAt':serverTimestamp(),'userId':_0x393a5d};_0x2f5c5c[_0x1a25dd(0x224)](_0x544224,_0x4a9081);}),await _0x2f5c5c[_0x48c9e3(0x21c)](),_0x1d1657+=_0x2c91f1[_0x48c9e3(0x21d)],console['log'](_0x48c9e3(0x202)+(_0x1ac5e5+0x1)+_0x48c9e3(0x1f1)+_0x1d1657+'/'+_0x3e02b3[_0x48c9e3(0x21d)]+'\x20total)');}return console[_0x48c9e3(0x24f)](_0x48c9e3(0x249)+_0x1d1657+_0x48c9e3(0x24b)+_0x393a5d+_0x48c9e3(0x216)),{'success':!![],'count':_0x1d1657};}catch(_0x13df40){return console['error'](_0x48c9e3(0x20f),_0x13df40),console[_0x48c9e3(0x1e6)]('Error\x20code:',_0x13df40['code']),console[_0x48c9e3(0x1e6)](_0x48c9e3(0x238),_0x13df40[_0x48c9e3(0x236)]),{'success':![],'error':_0x13df40['message'],'count':0x0};}}export async function syncUserData(_0x27fd73,_0x19c29d,_0xde4ce7,_0x34e47a=null){const _0x3c355a=_0x2d717e;try{console[_0x3c355a(0x24f)](_0x3c355a(0x1f7)+_0xde4ce7[_0x3c355a(0x21d)]+_0x3c355a(0x23f));const _0x4b7892={'stats':_0x19c29d,'updatedAt':serverTimestamp()};_0x34e47a&&(_0x4b7892[_0x3c355a(0x1fa)]={'ecocoins':_0x34e47a[_0x3c355a(0x1f8)]||0x0,'streak':_0x34e47a['streak']||0x0,'achievements':_0x34e47a[_0x3c355a(0x22d)]||{},'totalCompletedQuests':_0x34e47a[_0x3c355a(0x221)]||0x0,'lastScanDate':_0x34e47a[_0x3c355a(0x219)],'unlockedThemes':_0x34e47a[_0x3c355a(0x241)]||[_0x3c355a(0x237)],'unlockedAvatars':_0x34e47a['unlockedAvatars']||[_0x3c355a(0x218)],'unlockedBackgrounds':_0x34e47a['unlockedBackgrounds']||[],'currentTheme':_0x34e47a['currentTheme']||'light','currentAvatar':_0x34e47a[_0x3c355a(0x22b)]||'default','currentAvatarIcon':_0x34e47a['currentAvatarIcon']||'üë§'});await updateDoc(doc(db,_0x3c355a(0x21f),_0x27fd73),_0x4b7892);const _0x59bd8f=await batchUploadScans(_0x27fd73,_0xde4ce7);return console[_0x3c355a(0x24f)](_0x3c355a(0x24e)+_0x59bd8f[_0x3c355a(0x22f)]+_0x3c355a(0x242)),_0x59bd8f;}catch(_0xa05133){return console[_0x3c355a(0x1e6)](_0x3c355a(0x1fb),_0xa05133),{'success':![],'error':_0xa05133[_0x3c355a(0x236)],'count':0x0};}}export async function saveActivity(_0x3b4238,_0xd6796c){const _0x3a56f8=_0x2d717e;try{const _0x4892da=doc(db,_0x3a56f8(0x21f),_0x3b4238,_0x3a56f8(0x204),Date['now']()['toString']());await setDoc(_0x4892da,{..._0xd6796c,'createdAt':serverTimestamp()}),console[_0x3a56f8(0x24f)](_0x3a56f8(0x217));}catch(_0xbf1736){console[_0x3a56f8(0x1e6)](_0x3a56f8(0x1eb),_0xbf1736);}}export function isOnline(){return navigator['onLine'];}export async function getLeaderboard(_0x4e87f2=_0x2d717e(0x21e),_0x3c2243=0x14){const _0x341eac=_0x2d717e;try{const {collection:_0x27f1b3,query:_0x4c364d,orderBy:_0x37b2cf,limit:_0x192dab,getDocs:_0x16215f}=await import(_0x341eac(0x213));console['log'](_0x341eac(0x225)+_0x4e87f2+_0x341eac(0x205)+_0x3c2243+_0x341eac(0x222));const _0x43d104=_0x27f1b3(db,_0x341eac(0x21f)),_0x352b7a=_0x4c364d(_0x43d104,_0x37b2cf(_0x341eac(0x1f2),_0x341eac(0x1ff)),_0x192dab(_0x3c2243)),_0x176116=await _0x16215f(_0x352b7a),_0x6aa234=[];return _0x176116[_0x341eac(0x23c)](_0xc9b8e5=>{const _0x14ec8a=_0x341eac,_0x44feb5=_0xc9b8e5['data']();_0x6aa234[_0x14ec8a(0x245)]({'uid':_0xc9b8e5['id'],'name':_0x44feb5[_0x14ec8a(0x228)]||_0x14ec8a(0x1fd),'avatar':(_0x44feb5['name']||'U')[_0x14ec8a(0x23a)](0x0)[_0x14ec8a(0x207)](),'points':_0x44feb5[_0x14ec8a(0x235)]?.['points']||0x0,'items':_0x44feb5[_0x14ec8a(0x235)]?.[_0x14ec8a(0x1f5)]||0x0,'level':_0x44feb5[_0x14ec8a(0x235)]?.[_0x14ec8a(0x20d)]||0x1});}),console[_0x341eac(0x24f)]('‚úÖ\x20Leaderboard\x20fetched:\x20'+_0x6aa234[_0x341eac(0x21d)]+'\x20users'),_0x6aa234;}catch(_0x3562ef){return console[_0x341eac(0x1e6)](_0x341eac(0x21a),_0x3562ef),[];}}export async function updateLeaderboardStats(_0x2c6dd4,_0xc116b1){const _0x289d25=_0x2d717e;try{const _0x5bd4a1=doc(db,_0x289d25(0x21f),_0x2c6dd4);await updateDoc(_0x5bd4a1,{'stats.points':_0xc116b1[_0x289d25(0x1ec)],'stats.items':_0xc116b1[_0x289d25(0x1f5)],'stats.level':_0xc116b1[_0x289d25(0x20d)],'stats.plastic':_0xc116b1[_0x289d25(0x1f0)],'stats.paper':_0xc116b1[_0x289d25(0x200)],'stats.glass':_0xc116b1[_0x289d25(0x1ea)],'stats.metal':_0xc116b1[_0x289d25(0x226)],'lastActive':serverTimestamp()}),console[_0x289d25(0x24f)](_0x289d25(0x201));}catch(_0x2beda0){console[_0x289d25(0x1e6)](_0x289d25(0x24a),_0x2beda0);}}function _0x54ef(){const _0x1f66d4=[')...','15897ITtSFn','set','üìä\x20Fetching\x20','metal','‚úÖ\x20User\x20logged\x20out','name','code','776yNyiia','currentAvatar','currentUser','achievements','‚ùå\x20Logout\x20error:','count','‚ùå\x20Registration\x20error:','user','üîÑ\x20Starting\x20batch\x20upload\x20of\x20','490920cWIabj','emoji','stats','message','light','Error\x20message:','312kweEvn','charAt','‚ùå\x20Error\x20getting\x20user\x20data:','forEach','‚úÖ\x20User\x20data\x20saved\x20to\x20Firestore','weight','\x20scans,\x20updating\x20stats...','979751268015','unlockedThemes','\x20scans\x20uploaded','‚úÖ\x20User\x20logged\x20in:','üì¶\x20Processing\x20batch\x20','push','122341VTYvxF','unknown','‚ùå\x20User\x20not\x20authenticated\x20for\x20stats\x20update','‚úÖ\x20All\x20scans\x20uploaded\x20successfully:\x20','‚ùå\x20Error\x20updating\x20leaderboard\x20stats:','\x20scans\x20to\x20users/','User\x20ID\x20does\x20not\x20match\x20authenticated\x20user','type','‚úÖ\x20Sync\x20complete:\x20','log','error','‚ùå\x20Error\x20updating\x20stats:','ecofriend-522b9.firebaseapp.com','‚ùå\x20Login\x20error:','glass','‚ùå\x20Error\x20saving\x20activity:','points','timestamp','1512423urXGLY','\x20scans\x20for\x20user\x20','plastic','\x20uploaded\x20successfully\x20(','stats.points','‚úÖ\x20User\x20data\x20retrieved\x20from\x20Firestore','2KYNREN','items','‚ùå\x20User\x20ID\x20mismatch','üîÑ\x20Syncing\x20data:\x20','ecocoins','ecofriend-522b9.firebasestorage.app','gamification','‚ùå\x20Error\x20syncing\x20user\x20data:','data','Anonymous','uid','desc','paper','‚úÖ\x20Leaderboard\x20stats\x20updated','‚úÖ\x20Batch\x20','252QOUTGD','activities','\x20leaderboard\x20(top\x20','2189GvFccg','toUpperCase','‚ÑπÔ∏è\x20No\x20scans\x20to\x20upload','64cuCKac','343pOKcjE','AIzaSyCkQsJ5Q29buQVyARSZwblz5NuJC8pgAI0','9530VrBqhB','level','‚ùå\x20User\x20not\x20authenticated','‚ùå\x20Error\x20batch\x20uploading\x20scans:','Unknown','ecofriend-522b9','\x20scans)','https://www.gstatic.com/firebasejs/11.0.2/firebase-firestore.js','‚ÑπÔ∏è\x20No\x20user\x20data\x20found\x20in\x20Firestore','scans','/scans','‚úÖ\x20Activity\x20saved\x20to\x20Firestore','default','lastScanDate','‚ùå\x20Error\x20fetching\x20leaderboard:','‚ùå\x20Error\x20saving\x20user\x20data:','commit','length','global','users','exists','totalCompletedQuests'];_0x54ef=function(){return _0x1f66d4;};return _0x54ef();}export{app,authInstance as firebaseAuth,db};