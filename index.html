<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#22c55e">
  
  <!-- PWA Meta Tags -->
  <link rel="manifest" href="manifest.json" crossorigin="use-credentials">
  <link rel="apple-touch-icon" href="/icons/icon-192x192.png">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="EcoFriend">
  <meta name="application-name" content="EcoFriend">
  <meta name="msapplication-TileColor" content="#22c55e">
  <meta name="msapplication-TileImage" content="/icons/icon-144x144.png">
  
  <title data-lang-key="app.title_long">EcoFriend - –≠–∫–æ–ª–æ–≥–∏—á–Ω–æ–µ –±—É–¥—É—â–µ–µ</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="features.css">
</head>
<body>
  
  <!-- Welcome Screen -->
  <div id="welcome-screen" class="screen active">
    <div class="welcome-content">
      <div class="logo-large">
        <div class="logo-icon">üå±</div>
      </div>
      <h1 class="welcome-title" data-lang-key="app.title">EcoFriend</h1>
      <p class="welcome-subtitle" data-lang-key="welcome.subtitle">–°–∫–∞–Ω–∏—Ä—É–π –æ—Ç—Ö–æ–¥—ã, –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π –±–∞–ª–ª—ã<br>–∏ –¥–µ–ª–∞–π –º–∏—Ä —á–∏—â–µ</p>
      
      <div class="welcome-actions">
        <button class="btn btn-primary" id="btn-get-started" data-lang-key="welcome.start">–ù–∞—á–∞—Ç—å</button>
        <button class="btn btn-secondary" id="btn-have-account" data-lang-key="welcome.have_account">–£ –º–µ–Ω—è –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
      </div>
    </div>
  </div>

  <!-- Registration Screen -->
  <div id="register-screen" class="screen">
    <div class="screen-header">
      <button class="btn-back" id="btn-back-from-register">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
      </button>
      <h2 data-lang-key="auth.register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
      <div></div>
    </div>
    
    <div class="screen-content">
      <form id="register-form" class="form">
        <div class="form-group">
          <label for="register-name" data-lang-key="auth.name">–ò–º—è</label>
          <input type="text" id="register-name" data-lang-placeholder="auth.name_placeholder" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è" required>
        </div>
        
        <div class="form-group">
          <label for="register-email" data-lang-key="auth.email">Email</label>
          <input type="email" id="register-email" data-lang-placeholder="auth.email_placeholder" placeholder="example@mail.com" required>
        </div>
        
        <div class="form-group">
          <label for="register-password" data-lang-key="auth.password">–ü–∞—Ä–æ–ª—å</label>
          <input type="password" id="register-password" data-lang-placeholder="auth.password_hint" placeholder="–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤" required>
        </div>
        
        <button type="submit" class="btn btn-primary btn-full">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
      </form>
    </div>
  </div>

  <!-- Login Screen -->
  <div id="login-screen" class="screen">
    <div class="screen-header">
      <button class="btn-back" id="btn-back-from-login">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
      </button>
      <h2 data-lang-key="auth.login">–í—Ö–æ–¥</h2>
      <div></div>
    </div>
    
    <div class="screen-content">
      <form id="login-form" class="form">
        <div class="form-group">
          <label for="login-email" data-lang-key="auth.email">Email</label>
          <input type="email" id="login-email" data-lang-placeholder="auth.email_placeholder" placeholder="example@mail.com" required>
        </div>
        
        <div class="form-group">
          <label for="login-password" data-lang-key="auth.password">–ü–∞—Ä–æ–ª—å</label>
          <input type="password" id="login-password" data-lang-placeholder="auth.password_placeholder" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required>
        </div>
        
        <button type="submit" class="btn btn-primary btn-full" data-lang-key="auth.login_button">–í–æ–π—Ç–∏</button>
      </form>
    </div>
  </div>

  <!-- Main App Screen -->
  <div id="main-screen" class="screen">
    <div class="screen-header">
      <h2 data-lang-key="main.title">–ì–ª–∞–≤–Ω–∞—è</h2>
      <div class="header-actions">
        <!-- FIXED: Added streak display on main screen -->
        <div class="streak-mini" id="main-streak-badge" style="display: none;">
          <span class="streak-icon-mini">üî•</span>
          <span id="main-streak-days">0</span>
        </div>
        <button class="btn-icon" id="btn-notifications">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9M13.73 21a2 2 0 0 1-3.46 0"/>
          </svg>
          <span id="pending-scans-badge">0</span>
        </button>
      </div>
    </div>
    
    <div class="screen-content">
      <!-- User Card -->
      <div class="user-card">
        <div class="user-avatar">
          <span id="user-avatar-text">U</span>
        </div>
        <div class="user-info">
          <h3 id="user-name-display">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h3>
          <p class="user-level"><span data-lang-key="main.level">–£—Ä–æ–≤–µ–Ω—å</span> <span id="user-level">1</span></p>
        </div>
        <div class="user-points">
          <div class="points-value" id="user-points">0</div>
          <div class="points-label" data-lang-key="main.points">–±–∞–ª–ª–æ–≤</div>
        </div>
      </div>

      <!-- Progress Bar -->
      <div class="progress-card">
        <div class="progress-info">
          <span data-lang-key="main.to_next_level">–î–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è</span>
          <span><span id="progress-current">0</span> / <span id="progress-max">300</span></span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="progress-fill"></div>
        </div>
      </div>

      <!-- Quick Stats -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">üßÉ</div>
          <div class="stat-value" id="stat-plastic">0</div>
          <div class="stat-label" data-lang-key="waste.plastic">–ü–ª–∞—Å—Ç–∏–∫</div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">üìÑ</div>
          <div class="stat-value" id="stat-paper">0</div>
          <div class="stat-label" data-lang-key="waste.paper">–ë—É–º–∞–≥–∞</div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">üçæ</div>
          <div class="stat-value" id="stat-glass">0</div>
          <div class="stat-label" data-lang-key="waste.glass">–°—Ç–µ–∫–ª–æ</div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">ü•´</div>
          <div class="stat-value" id="stat-metal">0</div>
          <div class="stat-label" data-lang-key="waste.metal">–ú–µ—Ç–∞–ª–ª</div>
        </div>
      </div>

      <!-- Scan Button -->
      <div class="scan-button-container">
        <button class="btn-scan" id="btn-scan">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/>
            <circle cx="12" cy="13" r="4"/>
          </svg>
          <span data-lang-key="main.scan_waste">–°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—Ö–æ–¥—ã</span>
        </button>
        <button class="btn-scan secondary" id="btn-scan-barcode">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="4" width="18" height="16" rx="2" ry="2"></rect>
            <line x1="6" y1="8" x2="6" y2="16"></line>
            <line x1="10" y1="8" x2="10" y2="16"></line>
            <line x1="14" y1="8" x2="14" y2="16"></line>
            <line x1="18" y1="8" x2="18" y2="16"></line>
          </svg>
          <span data-lang-key="main.scan_barcode">–°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–æ —à—Ç—Ä–∏—Ö–∫–æ–¥—É</span>
        </button>
        <button class="btn-scan secondary" id="btn-recycling-guide">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2L2 7l10 5 10-5-10-5z"/>
            <path d="M2 17l10 5 10-5M2 12l10 5 10-5"/>
          </svg>
          <span data-lang-key="main.recycling_guide">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–µ</span>
        </button>
      </div>

      <!-- Recent Activity -->
      <div class="section-header">
        <h3 data-lang-key="main.recent_activity">–ù–µ–¥–∞–≤–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</h3>
      </div>
      <div class="activity-list" id="activity-list">
        <div class="empty-state">
          <p>–ü–æ–∫–∞ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</p>
          <p class="empty-state-hint">–û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ –≤–∞—à –ø–µ—Ä–≤—ã–π –ø—Ä–µ–¥–º–µ—Ç!</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Scanner Screen -->
  <div id="scanner-screen" class="screen">
    <div class="scanner-header">
      <button class="btn-close" id="btn-close-scanner">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M18 6L6 18M6 6l12 12"/>
        </svg>
      </button>
    </div>
    
    <div class="scanner-content">
      <div class="camera-container" id="camera-container">
        <div class="camera-placeholder" id="camera-placeholder">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/>
            <circle cx="12" cy="13" r="4"/>
          </svg>
          <p data-lang-key="scanner.init">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞–º–µ—Ä—ã...</p>
        </div>
        <div class="scan-frame"></div>
      </div>
      
      <div class="scanner-result" id="scanner-result"></div>
      
      <div class="scanner-controls">
        <button class="btn btn-primary btn-capture" id="btn-capture" disabled>
          <span data-lang-key="scanner.capture">–°—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞—Ç—å</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Barcode Scanner Screen -->
  <div id="barcode-screen" class="screen">
    <div class="scanner-header">
      <button class="btn-close" id="btn-close-barcode">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M18 6L6 18M6 6l12 12"/>
        </svg>
      </button>
    </div>

    <div class="scanner-content">
      <div class="camera-container" id="barcode-camera-container">
        <div class="camera-placeholder" id="barcode-placeholder">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="4" width="18" height="16" rx="2" ry="2"></rect>
            <line x1="6" y1="8" x2="6" y2="16"></line>
            <line x1="10" y1="8" x2="10" y2="16"></line>
            <line x1="14" y1="8" x2="14" y2="16"></line>
            <line x1="18" y1="8" x2="18" y2="16"></line>
          </svg>
          <p data-lang-key="scanner.barcode_instruction">–ù–∞–≤–µ–¥–∏—Ç–µ –∫–∞–º–µ—Ä—É –Ω–∞ —à—Ç—Ä–∏—Ö–∫–æ–¥</p>
        </div>
        <div class="scan-frame"></div>
      </div>

      <!-- Manual Entry Button -->
      <div class="scanner-controls">
        <button class="btn btn-secondary" id="btn-manual-barcode-entry" data-lang-key="scanner.manual_entry">
          –í–≤–µ—Å—Ç–∏ –≤—Ä—É—á–Ω—É—é
        </button>
      </div>

      <!-- Barcode Result Modal (Pull-up Panel) -->
      <div id="barcode-result-modal" class="modal">
        <div class="modal-content" id="barcode-result-content">
          <div class="modal-header">
            <h3 id="barcode-product-name">‚Äî</h3>
            <button class="btn-close-modal" id="btn-close-barcode-result">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 6L6 18M6 6l12 12"/>
              </svg>
            </button>
          </div>
          <div class="modal-body">
            <div class="barcode-product-header">
              <div class="barcode-waste-badge" id="barcode-waste-badge">‚Äî</div>
            </div>
            
            <div class="barcode-info-section">
              <div class="barcode-info-row">
                <span class="label" data-lang-key="scanner.waste_type">–¢–∏–ø –æ—Ç—Ö–æ–¥–æ–≤:</span>
                <span id="barcode-waste-type" class="waste-type-value">‚Äî</span>
              </div>
              <div class="barcode-info-row" id="barcode-plastic-row" style="display: none;">
                <span class="label" data-lang-key="scanner.plastic_type">–¢–∏–ø –ø–ª–∞—Å—Ç–∏–∫–∞:</span>
                <span id="barcode-plastic-type">‚Äî</span>
              </div>
              <div class="barcode-info-row">
                <span class="label" data-lang-key="scanner.eco_score">–≠–∫–æ-–æ—Ü–µ–Ω–∫–∞:</span>
                <span id="barcode-green-score" class="green-score-value">‚Äî</span>
              </div>
              <div class="barcode-info-row">
                <span class="label" data-lang-key="scanner.impact">–í–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ:</span>
                <span id="barcode-impact">‚Äî</span>
              </div>
            </div>
    
            <div class="recycling-tips" id="barcode-recycling-tips" style="display: none;">
              <h4 data-lang-key="scanner.recycling_tips">‚ôªÔ∏è –°–æ–≤–µ—Ç—ã –ø–æ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–µ</h4>
              <p id="barcode-recycling-advice">‚Äî</p>
            </div>
    
            <div class="barcode-actions">
              <button class="btn btn-primary btn-full" id="btn-save-barcode-scan" style="display: none;" data-lang-key="scanner.save_scan">
                –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–∫–∞–Ω
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Statistics Screen -->
  <div id="stats-screen" class="screen">
    <div class="screen-header">
      <h2 data-lang-key="stats.title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
      <div class="period-selector">
        <button class="period-btn active" data-period="7" data-lang-key="stats.period_7">7 –¥–Ω–µ–π</button>
        <button class="period-btn" data-period="30" data-lang-key="stats.period_30">30 –¥–Ω–µ–π</button>
        <button class="period-btn" data-period="all" data-lang-key="stats.period_all">–í—Å—ë –≤—Ä–µ–º—è</button>
      </div>
    </div>
    
    <div class="screen-content">
      <div class="stats-summary">
        <div class="summary-card">
          <div class="summary-icon">üìä</div>
          <div class="summary-content">
            <div class="summary-value" id="total-items">0</div>
            <div class="summary-label" data-lang-key="stats.total_items">–í—Å–µ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–æ–≤</div>
          </div>
        </div>
        
        <div class="summary-card">
          <div class="summary-icon">‚öñÔ∏è</div>
          <div class="summary-content">
            <div class="summary-value" id="total-weight">0 –∫–≥</div>
            <div class="summary-label" data-lang-key="stats.total_weight">–û–±—â–∏–π –≤–µ—Å</div>
          </div>
        </div>

        <div class="summary-card">
          <div class="summary-icon">üèÜ</div>
          <div class="summary-content">
            <div class="summary-value" id="total-points-stats">0</div>
            <div class="summary-label" data-lang-key="stats.total_points">–í—Å–µ–≥–æ –±–∞–ª–ª–æ–≤</div>
          </div>
        </div>

        <div class="summary-card">
          <div class="summary-icon">üå≥</div>
          <div class="summary-content">
            <div class="summary-value" id="total-trees-saved">0</div>
            <div class="summary-label" data-lang-key="profile.trees_saved">–î–µ—Ä–µ–≤—å–µ–≤ —Å–ø–∞—Å–µ–Ω–æ</div>
          </div>
        </div>
      </div>

      <div class="section-header">
        <h3 data-lang-key="stats.activity">–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∑–∞ –ø–µ—Ä–∏–æ–¥</h3>
      </div>

      <div class="activity-chart" id="activity-chart">
        <div class="chart-bars" id="chart-bars">
          <!-- Bars will be generated dynamically -->
        </div>
        <div class="chart-legend">
          <span data-lang-key="waste.plastic_emoji">üßÉ –ü–ª–∞—Å—Ç–∏–∫</span>
          <span data-lang-key="waste.paper_emoji">üìÑ –ë—É–º–∞–≥–∞</span>
          <span data-lang-key="waste.glass_emoji">üçæ –°—Ç–µ–∫–ª–æ</span>
          <span data-lang-key="waste.metal_emoji">ü•´ –ú–µ—Ç–∞–ª–ª</span>
        </div>
      </div>

      <div class="section-header">
        <h3 data-lang-key="stats.by_type">–ü–æ —Ç–∏–ø–∞–º –æ—Ç—Ö–æ–¥–æ–≤</h3>
      </div>

      <div class="waste-breakdown">
        <div class="waste-item">
          <div class="waste-item-row">
            <div class="waste-item-left">
              <span class="waste-icon">üßÉ</span>
              <span class="waste-name" data-lang-key="waste.plastic">–ü–ª–∞—Å—Ç–∏–∫</span>
            </div>
            <div class="waste-item-right">
              <span class="waste-count" id="breakdown-plastic">0</span>
              <span class="waste-points" id="breakdown-plastic-points">0 –±</span>
            </div>
          </div>
          <div class="waste-progress">
            <div class="waste-progress-bar" id="progress-plastic" style="width: 0%"></div>
          </div>
        </div>

        <div class="waste-item">
          <div class="waste-item-row">
            <div class="waste-item-left">
              <span class="waste-icon">üìÑ</span>
              <span class="waste-name" data-lang-key="waste.paper">–ë—É–º–∞–≥–∞</span>
            </div>
            <div class="waste-item-right">
              <span class="waste-count" id="breakdown-paper">0</span>
              <span class="waste-points" id="breakdown-paper-points">0 –±</span>
            </div>
          </div>
          <div class="waste-progress">
            <div class="waste-progress-bar" id="progress-paper" style="width: 0%"></div>
          </div>
        </div>

        <div class="waste-item">
          <div class="waste-item-row">
            <div class="waste-item-left">
              <span class="waste-icon">üçæ</span>
              <span class="waste-name" data-lang-key="waste.glass">–°—Ç–µ–∫–ª–æ</span>
            </div>
            <div class="waste-item-right">
              <span class="waste-count" id="breakdown-glass">0</span>
              <span class="waste-points" id="breakdown-glass-points">0 –±</span>
            </div>
          </div>
          <div class="waste-progress">
            <div class="waste-progress-bar" id="progress-glass" style="width: 0%"></div>
          </div>
        </div>

        <div class="waste-item">
          <div class="waste-item-row">
            <div class="waste-item-left">
              <span class="waste-icon">ü•´</span>
              <span class="waste-name" data-lang-key="waste.metal">–ú–µ—Ç–∞–ª–ª</span>
            </div>
            <div class="waste-item-right">
              <span class="waste-count" id="breakdown-metal">0</span>
              <span class="waste-points" id="breakdown-metal-points">0 –±</span>
            </div>
          </div>
          <div class="waste-progress">
            <div class="waste-progress-bar" id="progress-metal" style="width: 0%"></div>
          </div>
        </div>
      </div>

      <div class="section-header">
        <h3 data-lang-key="stats.history">–ò—Å—Ç–æ—Ä–∏—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</h3>
      </div>
      
      <div class="scan-history" id="scan-history">
        <div class="empty-state">
          <p>–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settings-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 data-lang-key="settings.title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
        <button class="btn-close-modal" id="btn-close-settings">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 6L6 18M6 6l12 12"/>
          </svg>
        </button>
      </div>
      
      <div class="modal-body">
        <div class="settings-section">
          <h4 data-lang-key="settings.sync">–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</h4>
          
          <div class="setting-item">
            <div class="setting-label">
              <span data-lang-key="settings.auto_sync">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</span>
              <small data-lang-key="settings.auto_sync_desc">–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å –æ–±–ª–∞–∫–æ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</small>
            </div>
            <label class="toggle">
              <input type="checkbox" id="setting-auto-sync" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>

          <div class="setting-item">
            <div class="setting-label">
              <span data-lang-key="settings.sync_interval">–ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏</span>
              <small data-lang-key="settings.sync_interval_desc">–ö–∞–∫ —á–∞—Å—Ç–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ</small>
            </div>
            <select id="setting-sync-interval" class="setting-select">
              <option value="5" data-lang-key="settings.interval_5">–ö–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç</option>
              <option value="15" data-lang-key="settings.interval_15">–ö–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç</option> 
              <option value="30" data-lang-key="settings.interval_30">–ö–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç</option>
              <option value="60" data-lang-key="settings.interval_60">–ö–∞–∂–¥—ã–π —á–∞—Å</option>
            </select>
          </div>

          <button class="btn btn-secondary btn-full" id="btn-manual-sync">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
            </svg>
            <span data-lang-key="settings.sync_now">–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–µ–π—á–∞—Å</span>
          </button>
        </div>

        <div class="settings-section">
          <h4>–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</h4>
          
          <div class="setting-item">
            <div class="setting-label">
              <span data-lang-key="settings.confirm_scans">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è</span>
              <small data-lang-key="settings.confirm_scans_desc">–°–ø—Ä–∞—à–∏–≤–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</small>
            </div>
            <label class="toggle">
              <input type="checkbox" id="setting-confirm-scans" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>

        <div class="settings-section">
          <h4>–Ø–∑—ã–∫ / Language</h4>
          
          <div class="setting-item">
            <div class="setting-label">
              <span data-lang-key="settings.language_label">–Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ / Interface Language</span>
              <small data-lang-key="settings.language_desc">–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è / Select app language</small>
            </div>
            <select id="setting-language" class="setting-select">
              <option value="ru">–†—É—Å—Å–∫–∏–π (Russian)</option>
              <option value="en">English</option>
            </select>
          </div>
        </div>

        <div class="settings-section">
          <h4 data-lang-key="settings.notifications_header">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h4>
          
          <div class="setting-item">
            <div class="setting-label">
              <span data-lang-key="settings.notifications">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
              <small data-lang-key="settings.notifications_desc">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –¥–µ–π—Å—Ç–≤–∏—è—Ö</small>
            </div>
            <label class="toggle">
              <input type="checkbox" id="setting-notifications" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>

          <div class="setting-item">
            <div class="setting-label">
              <span data-lang-key="settings.sound">–ó–≤—É–∫</span>
              <small data-lang-key="settings.sound_desc">–ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –ø—Ä–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏</small>
            </div>
            <label class="toggle">
              <input type="checkbox" id="setting-sound" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>

          <div class="setting-item">
            <div class="setting-label">
              <span data-lang-key="settings.vibration">–í–∏–±—Ä–∞—Ü–∏—è</span>
              <small data-lang-key="settings.vibration_desc">–í–∏–±—Ä–∞—Ü–∏—è –ø—Ä–∏ –¥–µ–π—Å—Ç–≤–∏—è—Ö</small>
            </div>
            <label class="toggle">
              <input type="checkbox" id="setting-vibration" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>

        <div class="settings-section">
          <h4 data-lang-key="settings.about">–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</h4>
          <div class="info-item">
            <span data-lang-key="settings.version">–í–µ—Ä—Å–∏—è</span>
            <span>2.0.0</span>
          </div>
          <div class="info-item">
            <span data-lang-key="settings.storage">–•—Ä–∞–Ω–∏–ª–∏—â–µ</span>
            <span id="storage-info">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
          </div>
          <div class="info-item">
            <span data-lang-key="settings.pending_scans">–ù–µ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</span>
            <span id="pending-scans-info">0</span>
          </div>
        </div>

        <button class="btn btn-secondary btn-full" id="btn-clear-cache" data-lang-key="settings.clear_cache">–û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à</button>
      </div>
    </div>
  </div>

  <!-- Profile Screen -->
  <div id="profile-screen" class="screen">
    <div class="screen-header" >
      <h2 data-lang-key="profile.title">–ü—Ä–æ—Ñ–∏–ª—å</h2>
      <button class="btn-icon" id="btn-settings">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3"/>
          <path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M4.93 19.07l1.41-1.41m11.32-11.32l1.41-1.41"/>
        </svg>
      </button>
    </div>
    
    <div class="screen-content">
      <div class="profile-header">
        <div class="profile-avatar">
          <span id="profile-avatar-text">U</span>
        </div>
        <h3 id="profile-name">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h3>
        <p id="profile-email">email@example.com</p>
        <div class="profile-badge-display" id="profile-badge-container">
          <!-- Badge will be generated dynamically -->
        </div>
      </div>

      <div class="profile-stats">
        <div class="profile-stat">
          <div class="profile-stat-value" id="profile-level">1</div>
          <div class="profile-stat-label" data-lang-key="profile.level">–£—Ä–æ–≤–µ–Ω—å</div>
        </div>
        <div class="profile-stat">
          <div class="profile-stat-value" id="profile-points">0</div>
          <div class="profile-stat-label" data-lang-key="profile.points">–ë–∞–ª–ª–æ–≤</div>
        </div>
        <div class="profile-stat">
          <div class="profile-stat-value" id="profile-items">0</div>
          <div class="profile-stat-label" data-lang-key="profile.items">–ü—Ä–µ–¥–º–µ—Ç–æ–≤</div>
        </div>
      </div>

      <!-- EcoCoins Balance -->
      <div class="ecocoins-card">
        <div class="ecocoins-icon">üí∞</div>
        <div class="ecocoins-info">
          <div class="ecocoins-label" data-lang-key="shop.ecocoins">–≠–∫–æ–ú–æ–Ω–µ—Ç—ã</div>
          <div class="ecocoins-value" id="profile-ecocoins">0</div>
        </div>
        <button class="btn btn-primary" id="btn-view-shop" data-lang-key="nav.shop">–ú–∞–≥–∞–∑–∏–Ω</button>
      </div>

      <!-- Eco Footprint Card -->
      <div class="eco-footprint-card" id="btn-view-footprint">
        <div class="footprint-card-header">
          <h3 data-lang-key="profile.eco_footprint">üåç –≠–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å–ª–µ–¥</h3>
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="9 18 15 12 9 6"/>
          </svg>
        </div>
        <div class="footprint-preview">
          <div class="footprint-preview-item">
            <span>‚òÅÔ∏è</span>
            <span id="preview-co2">0 –∫–≥ CO‚ÇÇ</span>
          </div>
          <div class="footprint-preview-item">
            <span>üå≥</span>
            <span id="preview-trees">0 –¥–µ—Ä–µ–≤—å–µ–≤</span>
          </div>
        </div>
      </div>

      <div class="section-header">
        <h3 data-lang-key="profile.achievements">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>
      </div>
      
      <div class="achievements" id="achievements-container">
        <!-- Achievements will be generated dynamically -->
      </div>

      <button class="btn btn-danger btn-full" id="btn-logout" data-lang-key="auth.logout">–í—ã–π—Ç–∏</button>
    </div>
  </div>

  <!-- Quests Screen -->
  <div id="quests-screen" class="screen">
    <div class="screen-header">
      <h2 data-lang-key="nav.quests">–ö–≤–µ—Å—Ç—ã</h2>
      <div class="streak-badge">
        <span class="streak-icon">üî•</span>
        <span id="streak-days">0</span>
      </div>
    </div>
    
    <div class="screen-content">
      <div class="section-header">
        <h3 data-lang-key="quest.daily">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∫–≤–µ—Å—Ç—ã</h3>
        <p class="section-desc" data-lang-key="quest.daily_desc">–û–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å</p>
      </div>
      
      <div class="quests-list" id="daily-quests-list">
        <!-- Quests will be generated dynamically -->
      </div>

      <div class="section-header weekly-header">
        <h3 data-lang-key="quest.weekly">–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –∫–≤–µ—Å—Ç—ã</h3>
        <p class="section-desc" data-lang-key="quest.weekly_desc">–ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ –∏—Å–ø—ã—Ç–∞–Ω–∏—è —Å –∫—Ä—É–ø–Ω—ã–º–∏ –Ω–∞–≥—Ä–∞–¥–∞–º–∏. –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–∞–∂–¥—ã–π –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫.</p>
      </div>
      
      <div class="quests-list" id="weekly-quests-list">
        <!-- Weekly quests will be generated dynamically -->
      </div>

    </div>
  </div>

  <!-- Shop Screen -->
  <div id="shop-screen" class="screen">
    <div class="screen-header">
      <h2 data-lang-key="nav.shop">–ú–∞–≥–∞–∑–∏–Ω</h2>
      <div class="ecocoins-badge">
        <span class="coin-icon">üí∞</span>
        <span id="shop-balance">0</span>
      </div>
    </div>
    
    <div class="screen-content">
      <div class="section-header">
        <h3 data-lang-key="shop.themes">–¢–µ–º—ã –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è</h3>
      </div>
      
      <div class="shop-grid" id="themes-grid">
        <!-- Themes will be generated dynamically -->
      </div>

      <div class="section-header">
        <h3 data-lang-key="shop.avatars">–ê–≤–∞—Ç–∞—Ä—ã</h3>
      </div>
      
      <div class="shop-grid" id="avatars-grid">
        <!-- Avatars will be generated dynamically -->
      </div>

      <div class="section-header">
        <h3 data-lang-key="shop.badges">–ó–Ω–∞—á–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è</h3>
      </div>
      
      <div class="shop-grid" id="badges-grid">
        <!-- Badges will be generated dynamically -->
      </div>
    </div>
  </div>

  <!-- Leaderboard Screen -->
  <div id="leaderboard-screen" class="screen">
    <div class="screen-header">
      <h2 data-lang-key="leaderboard.title">–¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤</h2>
      <div></div> <!-- Placeholder for alignment -->
    </div>
    
    <div class="screen-content">
      <div class="leaderboard-list" id="leaderboard-list">
        <!-- Leaderboard will be generated dynamically -->
      </div>
    </div>
  </div>

  <!-- Battles Screen -->
  <div id="battles-screen" class="screen">
    <div class="screen-header">
      <h2 data-lang-key="nav.battles">–ë–∏—Ç–≤—ã</h2>
      <div></div>
    </div>
    
    <div class="screen-content">
      <div class="battle-card active">
        <div class="battle-header">
          <h3 data-lang-key="battle.weekly">‚öîÔ∏è –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è –±–∏—Ç–≤–∞</h3>
          <div class="battle-timer" id="battle-timer">
            <span class="timer-icon">‚è∞</span>
            <span id="battle-time-left">3 –¥–Ω—è 12 —á–∞—Å–æ–≤</span>
          </div>
        </div>
        
        <div class="battle-stats">
          <div class="battle-stat">
            <span class="stat-label" data-lang-key="battle.participants">–£—á–∞—Å—Ç–Ω–∏–∫–æ–≤</span>
            <span class="stat-value" id="battle-participants">0</span>
          </div>
          <div class="battle-stat">
            <span class="stat-label" data-lang-key="battle.your_rank">–í–∞—à–µ –º–µ—Å—Ç–æ</span>
            <span class="stat-value" id="battle-rank">-</span>
          </div>
          <div class="battle-stat">
            <span class="stat-label" data-lang-key="battle.your_score">–í–∞—à —Å—á–µ—Ç</span>
            <span class="stat-value" id="battle-score">0</span>
          </div>
        </div>
        
        <div class="battle-prize">
          <span class="prize-label" data-lang-key="battle.winner_prize">–ù–∞–≥—Ä–∞–¥–∞ –ø–æ–±–µ–¥–∏—Ç–µ–ª—é</span>
          <span class="prize-value">1000 –≠–∫–æ–ú–æ–Ω–µ—Ç üí∞</span>
        </div>
        
        <button class="btn btn-primary btn-full" id="btn-join-battle" data-lang-key="battle.join">
          –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –±–∏—Ç–≤–µ
        </button>
      </div>

      <div class="section-header">
        <h3>–¢–æ–ø —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</h3>
      </div>
      
      <div class="battle-leaderboard" id="battle-leaderboard">
        <!-- Battle leaderboard will be generated dynamically -->
      </div>
    </div>
  </div>

  <!-- Recycling Guide Screen -->
  <div id="recycling-guide-screen" class="screen">
    <div class="screen-header">
      <button class="btn-back" data-screen="main-screen">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
      </button>
      <h2 data-lang-key="main.recycling_guide">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–µ</h2>
    </div>
    <div class="screen-content recycling-guide-content">
      <div class="recycling-category" data-type="plastic">
        <div class="category-header">
          <div class="category-icon">üßÉ</div>
          <h3 data-lang-key="guide.plastic.title">–ü–ª–∞—Å—Ç–∏–∫</h3>
        </div>
        <div class="category-content">
          <p class="category-description" data-lang-key="guide.plastic.desc">–ü–ª–∞—Å—Ç–∏–∫ - –æ–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –≤–∏–¥–æ–≤ –æ—Ç—Ö–æ–¥–æ–≤. –í–∞–∂–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –µ–≥–æ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å.</p>
          <div class="recycling-tips">
            <h4 data-lang-key="guide.how_to_recycle">–ö–∞–∫ –ø–µ—Ä–µ—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å:</h4>
            <ul>
              <li data-lang-key="guide.plastic.tip1">–ü—Ä–æ–º–æ–π—Ç–µ —É–ø–∞–∫–æ–≤–∫—É –ø–µ—Ä–µ–¥ —Å–¥–∞—á–µ–π</li>
              <li data-lang-key="guide.plastic.tip2">–£–¥–∞–ª–∏—Ç–µ —ç—Ç–∏–∫–µ—Ç–∫–∏ –∏ –∫—Ä—ã—à–∫–∏</li>
              <li data-lang-key="guide.plastic.tip3">–°–¥–∞–≤–∏—Ç–µ –±—É—Ç—ã–ª–∫–∏ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞</li>
              <li data-lang-key="guide.plastic.tip4">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–∞—Ä–∫–∏—Ä–æ–≤–∫—É (1-7) –Ω–∞ —É–ø–∞–∫–æ–≤–∫–µ</li>
            </ul>
          </div>
          <div class="plastic-types">
            <h4 data-lang-key="guide.plastic.types_title">–¢–∏–ø—ã –ø–ª–∞—Å—Ç–∏–∫–∞:</h4>
            <div class="plastic-type-item" data-lang-html="guide.plastic.type1"><strong>PET (1)</strong> - –ü–æ–ª–∏—ç—Ç–∏–ª–µ–Ω—Ç–µ—Ä–µ—Ñ—Ç–∞–ª–∞—Ç. –ë—É—Ç—ã–ª–∫–∏ –¥–ª—è –Ω–∞–ø–∏—Ç–∫–æ–≤. –•–æ—Ä–æ—à–æ –ø–µ—Ä–µ—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è.</div>
            <div class="plastic-type-item" data-lang-html="guide.plastic.type2"><strong>HDPE (2)</strong> - –ü–æ–ª–∏—ç—Ç–∏–ª–µ–Ω –≤—ã—Å–æ–∫–æ–π –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏. –ö–∞–Ω–∏—Å—Ç—Ä—ã, –±—É—Ç—ã–ª–∫–∏ –¥–ª—è –º–æ–ª–æ–∫–∞. –õ–µ–≥–∫–æ –ø–µ—Ä–µ—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è.</div>
            <div class="plastic-type-item" data-lang-html="guide.plastic.type3"><strong>PVC (3)</strong> - –ü–æ–ª–∏–≤–∏–Ω–∏–ª—Ö–ª–æ—Ä–∏–¥. –¢—Ä—É–±—ã, –æ–∫–Ω–∞. –ü–µ—Ä–µ—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Ä–µ–¥–∫–æ.</div>
            <div class="plastic-type-item" data-lang-html="guide.plastic.type4"><strong>LDPE (4)</strong> - –ü–æ–ª–∏—ç—Ç–∏–ª–µ–Ω –Ω–∏–∑–∫–æ–π –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏. –ü–∞–∫–µ—Ç—ã, –ø–ª–µ–Ω–∫–∞. –ü–µ—Ä–µ—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ.</div>
            <div class="plastic-type-item" data-lang-html="guide.plastic.type5"><strong>PP (5)</strong> - –ü–æ–ª–∏–ø—Ä–æ–ø–∏–ª–µ–Ω. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –∫—Ä—ã—à–∫–∏. –•–æ—Ä–æ—à–æ –ø–µ—Ä–µ—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è.</div>
            <div class="plastic-type-item" data-lang-html="guide.plastic.type6"><strong>PS (6)</strong> - –ü–æ–ª–∏—Å—Ç–∏—Ä–æ–ª. –ü–µ–Ω–æ–ø–ª–∞—Å—Ç, –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–∞—è –ø–æ—Å—É–¥–∞. –ü–µ—Ä–µ—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Ä–µ–¥–∫–æ.</div>
            <div class="plastic-type-item" data-lang-html="guide.plastic.type7"><strong>Other (7)</strong> - –î—Ä—É–≥–∏–µ –≤–∏–¥—ã. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–µ—Å—Ç–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞.</div>
          </div>
        </div>
      </div>

      <div class="recycling-category" data-type="paper">
        <div class="category-header">
          <div class="category-icon">üìÑ</div>
          <h3 data-lang-key="guide.paper.title">–ë—É–º–∞–≥–∞ –∏ –∫–∞—Ä—Ç–æ–Ω</h3>
        </div>
        <div class="category-content">
          <p class="category-description" data-lang-key="guide.paper.desc">–ë—É–º–∞–≥–∞ —Ö–æ—Ä–æ—à–æ –ø–µ—Ä–µ—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è, –Ω–æ –≤–∞–∂–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –µ–µ –∫ —Å–¥–∞—á–µ.</p>
          <div class="recycling-tips">
            <h4 data-lang-key="guide.how_to_recycle">–ö–∞–∫ –ø–µ—Ä–µ—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å:</h4>
            <ul>
              <li data-lang-key="guide.paper.tip1">–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±—É–º–∞–≥–∞ —Å—É—Ö–∞—è</li>
              <li data-lang-key="guide.paper.tip2">–£–¥–∞–ª–∏—Ç–µ —Å–∫–æ—Ç—á –∏ –ø–ª–∞—Å—Ç–∏–∫–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã</li>
              <li data-lang-key="guide.paper.tip3">–ù–µ —Å–¥–∞–≤–∞–π—Ç–µ –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–Ω—É—é –±—É–º–∞–≥—É (–∂–∏—Ä, –∫—Ä–∞—Å–∫–∞)</li>
              <li data-lang-key="guide.paper.tip4">–°–¥–∞–≤–∏—Ç–µ –∫–∞—Ä—Ç–æ–Ω–Ω—ã–µ –∫–æ—Ä–æ–±–∫–∏</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="recycling-category" data-type="glass">
        <div class="category-header">
          <div class="category-icon">üçæ</div>
          <h3 data-lang-key="guide.glass.title">–°—Ç–µ–∫–ª–æ</h3>
        </div>
        <div class="category-content">
          <p class="category-description" data-lang-key="guide.glass.desc">–°—Ç–µ–∫–ª–æ –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –∫–∞—á–µ—Å—Ç–≤–∞.</p>
          <div class="recycling-tips">
            <h4 data-lang-key="guide.how_to_recycle">–ö–∞–∫ –ø–µ—Ä–µ—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å:</h4>
            <ul>
              <li data-lang-key="guide.glass.tip1">–ü—Ä–æ–º–æ–π—Ç–µ –±—É—Ç—ã–ª–∫–∏ –∏ –±–∞–Ω–∫–∏</li>
              <li data-lang-key="guide.glass.tip2">–£–¥–∞–ª–∏—Ç–µ –∫—Ä—ã—à–∫–∏ –∏ –ø—Ä–æ–±–∫–∏</li>
              <li data-lang-key="guide.glass.tip3">–ù–µ —Ä–∞–∑–±–∏–≤–∞–π—Ç–µ —Å—Ç–µ–∫–ª–æ - —ç—Ç–æ —É—Å–ª–æ–∂–Ω—è–µ—Ç –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫—É</li>
              <li data-lang-key="guide.glass.tip4">–†–∞–∑–¥–µ–ª—è–π—Ç–µ –ø–æ —Ü–≤–µ—Ç–∞–º (–±–µ—Å—Ü–≤–µ—Ç–Ω–æ–µ, –∑–µ–ª–µ–Ω–æ–µ, –∫–æ—Ä–∏—á–Ω–µ–≤–æ–µ)</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="recycling-category" data-type="metal">
        <div class="category-header">
          <div class="category-icon">ü•´</div>
          <h3 data-lang-key="guide.metal.title">–ú–µ—Ç–∞–ª–ª</h3>
        </div>
        <div class="category-content">
          <p class="category-description" data-lang-key="guide.metal.desc">–ú–µ—Ç–∞–ª–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∏ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ.</p>
          <div class="recycling-tips">
            <h4 data-lang-key="guide.how_to_recycle">–ö–∞–∫ –ø–µ—Ä–µ—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å:</h4>
            <ul>
              <li data-lang-key="guide.metal.tip1">–ü—Ä–æ–º–æ–π—Ç–µ –±–∞–Ω–∫–∏ –ø–µ—Ä–µ–¥ —Å–¥–∞—á–µ–π</li>
              <li data-lang-key="guide.metal.tip2">–£–¥–∞–ª–∏—Ç–µ —ç—Ç–∏–∫–µ—Ç–∫–∏</li>
              <li data-lang-key="guide.metal.tip3">–†–∞–∑–¥–µ–ª—è–π—Ç–µ –∞–ª—é–º–∏–Ω–∏–π –∏ —Å—Ç–∞–ª—å</li>
              <li data-lang-key="guide.metal.tip4">–°–¥–∞–≤–∏—Ç–µ –±–∞–Ω–∫–∏ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="recycling-category" data-type="organic" style="display: none;">
        <div class="category-header">
          <div class="category-icon">üçÉ</div>
          <h3 data-lang-key="guide.organic.title">–û—Ä–≥–∞–Ω–∏–∫–∞</h3>
        </div>
        <div class="category-content">
          <p class="category-description" data-lang-key="guide.organic.desc">–û—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏–µ –æ—Ç—Ö–æ–¥—ã –º–æ–∂–Ω–æ –∫–æ–º–ø–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —É–¥–æ–±—Ä–µ–Ω–∏–π.</p>
          <div class="recycling-tips">
            <h4>–ö–∞–∫ –∫–æ–º–ø–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:</h4>
            <ul>
              <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–ø–æ—Å—Ç–Ω—É—é —è–º—É –∏–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä</li>
              <li>–°–º–µ—à–∏–≤–∞–π—Ç–µ —Å —Å—É—Ö–∏–º–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏ (–ª–∏—Å—Ç—å—è, –æ–ø–∏–ª–∫–∏)</li>
              <li>–†–µ–≥—É–ª—è—Ä–Ω–æ –ø–µ—Ä–µ–≤–æ—Ä–∞—á–∏–≤–∞–π—Ç–µ –∫–æ–º–ø–æ—Å—Ç</li>
              <li>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ –≤–ª–∞–∂–Ω–æ—Å—Ç—å</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Eco Footprint Modal -->
  <div id="footprint-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 data-lang-key="profile.eco_footprint">–≠–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å–ª–µ–¥</h3>
        <button class="btn-close-modal" id="btn-close-footprint">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 6L6 18M6 6l12 12"/>
          </svg>
        </button>
      </div>
      
      <div class="modal-body">
        <div class="footprint-hero">
          <div class="footprint-icon">üåç</div>
          <h2 data-lang-key="footprint.title">–í–∞—à –≤–∫–ª–∞–¥ –≤ –∑–∞—â–∏—Ç—É –ø–ª–∞–Ω–µ—Ç—ã</h2>
        </div>

        <div class="footprint-stats">
          <div class="footprint-card">
            <div class="footprint-card-icon">‚òÅÔ∏è</div>
            <div class="footprint-card-value" id="co2-saved">0 –∫–≥</div>
            <div class="footprint-card-label" data-lang-key="footprint.co2_saved">CO‚ÇÇ –Ω–µ –ø–æ–ø–∞–ª–æ –≤ –∞—Ç–º–æ—Å—Ñ–µ—Ä—É</div>
          </div>

          <div class="footprint-card">
            <div class="footprint-card-icon">üå≥</div>
            <div class="footprint-card-value" id="trees-saved">0</div>
            <div class="footprint-card-label" data-lang-key="footprint.trees_saved">–î–µ—Ä–µ–≤—å–µ–≤ —Å–ø–∞—Å–µ–Ω–æ</div>
          </div>

          <div class="footprint-card">
            <div class="footprint-card-icon">üíß</div>
            <div class="footprint-card-value" id="water-saved">0 –ª</div>
            <div class="footprint-card-label" data-lang-key="footprint.water_saved">–í–æ–¥—ã —Å—ç–∫–æ–Ω–æ–º–ª–µ–Ω–æ</div>
          </div>

          <div class="footprint-card">
            <div class="footprint-card-icon">‚ö°</div>
            <div class="footprint-card-value" id="energy-saved">0 –∫–í—Ç¬∑—á</div>
            <div class="footprint-card-label" data-lang-key="footprint.energy_saved">–≠–Ω–µ—Ä–≥–∏–∏ —Å—ç–∫–æ–Ω–æ–º–ª–µ–Ω–æ</div>
          </div>
        </div>

        <button class="btn btn-primary btn-full" id="btn-share-footprint" data-lang-key="footprint.share">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/>
            <polyline points="16 6 12 2 8 6"/>
            <line x1="12" y1="2" x2="12" y2="15"/>
          </svg>
          –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º–∏
        </button>
      </div>
    </div>
  </div>

  <!-- Eco Fact Modal -->
  <div id="eco-fact-modal" class="modal">
    <div class="modal-content eco-fact-content" onclick="event.stopPropagation()">
      <div class="eco-fact-icon">üå±</div>
      <h3 data-lang-key="fact.did_you_know">–ó–Ω–∞–ª–∏ –ª–∏ –≤—ã?</h3>
      <p class="eco-fact-text" id="eco-fact-text"></p>
      <button class="btn btn-primary" id="btn-close-fact" data-lang-key="fact.got_it">–ü–æ–Ω—è—Ç–Ω–æ</button>
    </div>
  </div>

  <!-- Bottom Navigation -->
  <nav class="bottom-nav" id="bottom-nav">
    <button class="nav-item active" data-screen="main">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
        <polyline points="9 22 9 12 15 12 15 22"/>
      </svg>
      <span data-lang-key="nav.home">–ì–ª–∞–≤–Ω–∞—è</span>
    </button>
    
    <button class="nav-item" data-screen="quests">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
        <polyline points="22 4 12 14.01 9 11.01"/>
      </svg>
      <span data-lang-key="nav.quests">–ö–≤–µ—Å—Ç—ã</span>
    </button>
    
    <button class="nav-item" data-screen="shop">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="9" cy="21" r="1"/>
        <circle cx="20" cy="21" r="1"/>
        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
      </svg>
      <span data-lang-key="nav.shop">–ú–∞–≥–∞–∑–∏–Ω</span>
    </button>
    
    <button class="nav-item" data-screen="stats">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="12" y1="20" x2="12" y2="10"/>
        <line x1="18" y1="20" x2="18" y2="4"/>
        <line x1="6" y1="20" x2="6" y2="16"/>
      </svg>
      <span data-lang-key="nav.stats">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
    </button>
    
    <button class="nav-item" data-screen="leaderboard">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="3" y="11" width="4" height="10"></rect>
        <rect x="10" y="7" width="4" height="14"></rect>
        <rect x="17" y="3" width="4" height="18"></rect>
      </svg>
      <span data-lang-key="nav.leaderboard">–õ–∏–¥–µ—Ä—ã</span>
    </button>
    
    <button class="nav-item" data-screen="profile">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
        <circle cx="12" cy="7" r="4"/>
      </svg>
      <span data-lang-key="nav.profile">–ü—Ä–æ—Ñ–∏–ª—å</span>
    </button>
  </nav>

  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loading-overlay">
    <div class="spinner"></div>
  </div>

  <!-- Toast Notification -->
  <div class="toast" id="toast"></div>

  <!-- Confirmation Modal -->
  <div id="confirmation-modal" class="modal">
    <div class="modal-content confirmation-modal">
      <div class="confirmation-icon" id="confirmation-icon">‚úì</div>
      <h3 id="confirmation-title" data-lang-key="scanner.recognized">–†–∞—Å–ø–æ–∑–Ω–∞–Ω–æ</h3>
      <p id="confirmation-message" data-lang-key="scanner.is_correct">–≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ?</p>
      <div class="confirmation-buttons">
        <button class="btn btn-secondary" id="btn-confirm-no" data-lang-key="scanner.confirm_no">–ù–µ—Ç, –ø–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
        <button class="btn btn-primary" id="btn-confirm-yes" data-lang-key="scanner.confirm_yes">–î–∞, —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- Manual Waste Type Modal -->
  <div id="waste-type-modal" class="modal">
    <div class="modal-content waste-type-modal">
      <div class="modal-header">
        <h3 data-lang-key="scanner.select_waste_type">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –æ—Ç—Ö–æ–¥–æ–≤</h3>
        <button class="btn-close-modal" id="btn-close-waste-modal">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 6L6 18M6 6l12 12"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="waste-options-grid">
          <button class="waste-option" data-type="plastic" data-lang-key="waste.plastic_emoji">üßÉ –ü–ª–∞—Å—Ç–∏–∫</button>
          <button class="waste-option" data-type="glass" data-lang-key="waste.glass_emoji">üçæ –°—Ç–µ–∫–ª–æ</button>
          <button class="waste-option" data-type="paper" data-lang-key="waste.paper_emoji">üìÑ –ë—É–º–∞–≥–∞</button>
          <button class="waste-option" data-type="metal" data-lang-key="waste.metal_emoji">ü•´ –ú–µ—Ç–∞–ª–ª</button>
          <button class="waste-option" data-type="organic" data-lang-key="waste.organic_emoji">üçé –û—Ä–≥–∞–Ω–∏–∫–∞</button>
          <button class="waste-option" data-type="other" data-lang-key="waste.other_emoji">üóëÔ∏è –î—Ä—É–≥–æ–µ</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script type="module" src="constants.js"></script>
  <script type="module" src="lang.js"></script>
  <script type="module" src="firebase.js"></script>
  <script type="module" src="storage.js"></script>
  <script type="module" src="scanner.js"></script>
  <script type="module" src="gamification.js"></script>
  <script type="module" src="barcode.js"></script>
  <script type="module" src="app-extensions.js"></script>
  <script type="module" src="script.js"></script>
  
  <!-- PWA Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/service-worker.js')
          .then(registration => {
            console.log('‚úÖ Service Worker registered:', registration.scope);
            
            // Check for updates periodically
            setInterval(() => {
              registration.update();
            }, 60000); // Check every minute
          })
          .catch(error => {
            console.error('‚ùå Service Worker registration failed:', error);
          });
      });
    }
    
    // Handle service worker updates
    let refreshing = false;
    navigator.serviceWorker?.addEventListener('controllerchange', () => {
      if (refreshing) return;
      refreshing = true;
      window.location.reload();
    });
    
    // Install prompt
    let deferredPrompt;
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      console.log('üì± PWA install prompt available');
    });
  </script>
</body>
</html>
